<ng:include src="'views/header.html'"></ng:include>

<div class="dropzone" draggable="true" file-dropzone="[image/png, image/jpeg, image/gif]" file="image" file-name="imageFileName" data-max-file-size="3">
	<span>Drop Image (.png, .jpeg, .gif)</span>
</div>

<div>
	<p>
		<select ng-model="removedEXIF" class="dropdown_list">
			<option value="false" ng-selected = "!removedEXIF"> Drag and drop your picture </option>
			<option value="true" ng-disabled ="!image"> Generate a new picture without geolocation </option>
		</select>
		<img src="images/hint_button_selfmade_JT.PNG" class="hint" ns-popover-template="templates/picturesTemplate.html" ns-popover ns-popover-theme="ns-popover-tooltip-theme"></img>
	</p>
</div>

<div ng-hide = "removedEXIF" class="image-container">
	<span ng-show="image">Filename: {{imageFileName}}</span><br/>
	<img id="imageDragged" ng-src={{image}} />
	<span id="exif"></span>
</div>	

<div ng-show = "removedEXIF">
	<textarea id="textarea" style="width:100%; height:300px"></textarea>
	<img id="newImage" style="width:200px; height:200px"></span>
	<input ng-model="pictureTitle"</input>
	<a id="downloadLink" href="" download="{{pictureTitle}}"> Download the new image</a>
</div>

<script>

	document.getElementById("imageDragged").onload = function(){
		var base64 = getData(this, function() {
			document.getElementById("exif").innerHTML = pretty(this);
	    });		
	    document.getElementById("textarea").value = convertedCode;
		document.getElementById("newImage").src = convertedCode;
		document.getElementById("downloadLink").href = convertedCode;
	};
</script>


