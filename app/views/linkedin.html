
<body ng-controller="LiCtrl">
	<!-- header -->
	<ng:include src="'views/header.html'"></ng:include>
	<!-- body -->
	<div class="container-semifluid" id="appBody">

		<div class="container-fixed" ng-show="loggedUser">
			<h2>Hi, {{userprofile.firstName}} {{userprofile.lastName}}</h2>
			<a href="{{userprofile.publicProfileUrl}}" target="_blank"> 
				<img class="img-polaroid" ng-src="{{userprofile.pictureUrl}}"/>
			</a>

			<div style="margin-top:10px">
				<p>If you have any difficulties to login:
					<ul>
						<li> 1) Try to refresh the page.
						<li> 2) You may be already logged in LinkedIn. Click on the button Logout to eventually logout.
						<li> 3) An extension of your browser may be blocking the import of the LinkedIn script. 
					</ul>
				</p>
				<button class="btn btn-mini btn-inverse" style="margin-top:0px;" type="button" ng-click="logoutLinkedIn()">Logout</button>
			</div>

			<h2>Information available through the API</h2>
				<h3> Personal information </h3>
					<ul>
						<li> ID: {{userprofile.id}} 
						<li> Firstname: {{userprofile.firstName}} 
						<li> Lastname: {{userprofile.lastName}}
						<li> <span ng-show="userprofile.maidenName">MaidenName: {{userprofile.maidenName}}</span>
						<li> <span ng-show="userprofile.dateOfBirth">Date of birth: {{userprofile.dateOfBirth.day}}/{{userprofile.dateOfBirth.month}}/{{userprofile.dateOfBirth.year}}</span>
							
						<li> Address: <span ng-show="userprofile.mainAddress"> {{userprofile.mainAddress}} </span>
							<span ng-show="!userprofile.mainAddress"> Not available </span>
						<li> Location: {{userprofile.location.name}} ({{userprofile.location.country.code}})
						<li> Contacts: {{userprofile.numConnections}} {{numConnectionsCapped}}
						<li> Phone numbers:<span ng-show="userprofile.phoneNumbers._total"> {{userprofile.phoneNumbers}}</span>
							<span ng-show="!userprofile.phoneNumbers._total"> None available</span>
						<li> Email: {{userprofile.emailAddress}}
						<li> Last update: {{userprofile.lastModifiedTimestamp|date:'medium'}}
					</ul>

				<h3> Job related information </h3>
					<ul>
						<li> Headline: {{userprofile.headline}} 
						<li> Specialities: Cannot be shown via API connection
						<li> Summary: Cannot be shown via API connection
						<li> <span ng-show="userprofile.industry">Industry: {{userprofile.industry.description}} ({{userprofile.industry.code}})</span>
					</ul>
					
					<table>
					    <tr>
					        <th>ID</th>
					        <th>Title</th>
					        <th>Start</th>
					        <th>End</th>
					        <th>Company</th>
					        <th>CompanyID</th>
					        <th>Industry</th>
					        <th>Size</th>
					        <th>Ticker</th>
					        <th>Type</th>
					    </tr>
					    <tr ng-repeat="position in positions">
					        <td>{{position.id}}</td>
					        <td>{{position.title}}</td>
					        <td><span ng-show="position.startDate">{{position.startDate.month}}/{{position.startDate.year}}</span></td>
					        <td><span ng-show="position.endDate">{{position.endDate.month}}/{{position.endDate.year}}</span></td>
					        <td>{{position.company.name}}</td>
					        <td>{{position.company.id}}</td>
					        <td>{{position.company.industry}}</td>
					        <td>{{position.company.size}}</td>
					        <td>{{position.company.ticker}}</td>
					        <td>{{position.company.type}}</td>
					    </tr>
					</table>

				<h3> Other information </h3>
					<ul>
						<li> <span ng-show="userprofile.interests">Interests: {{userprofile.interests}}</span>
						<li> <span ng-show="userprofile.associations">Associations: {{userprofile.associations}} </span>

						<!-- ._total if not displayed as collections instead of text -->
						<li> <span ng-show="userprofile.publications._total">Publications: </span>
							<span ng-repeat="publication in publications">{{ publication.title }} published in {{publication.date.year}} ({{<a href="{{publication.url}}" target="_blank"> {{publication.url}}</a>}}){{$last ? '.' : ', '}}  </span>

						<li> <span ng-show="userprofile.patents._total">Patents: </span>
							<span ng-repeat="patent in patents">{{ patent.title }} granted in {{patent.date.year}} ({{<a href="{{publication.url}}" target="_blank"> {{publication.url}}</a>}}){{$last ? '.' : ', '}}  </span>


						<li> <span ng-show="userprofile.languages._total">Languages: </span>
							<span ng-repeat="language in languages">{{ language.language.name }} ({{language.proficiency.level}}){{$last ? '.' : ', '}}  </span>

						<li> <span ng-show="userprofile.skills._total">Skills: </span>
							<span ng-repeat="skill in skills">{{ skill.skill.name }}{{$last ? '.' : ', '}}  </span>

						<li> <span ng-show="userprofile.educations._total">Educations: 
							<span ng-repeat="education in educations">{{education.schoolName}} from {{education.startDate.year}} to {{education.endDate.year}}{{$last ? '.' : ', '}} </span>

						<li> <span ng-show="userprofile.courses._total">Courses: </span>
							<span ng-repeat="course in courses">{{ course.name }}{{$last ? '.' : ', '}}  </span>

						<li> <span ng-show="userprofile.volunteer._total">Volunteer: {{userprofile.volunteer}} )</span>
							<span ng-repeat="volunteer in volunteers">{{ volunteer.role }} for {{volunteer.organization.name}}{{$last ? '.' : ', '}}  </span>
					</ul>

				<h3>Your profile</h3>
					<ul>
						<li> Public profile: <a href="{{userprofile.publicProfileUrl}}" target="_blank"> {{userprofile.publicProfileUrl}}</a>
						<li> Full profile: <a href="{{userprofile.siteStandardProfileRequest.url}}" target="_blank"> {{userprofile.siteStandardProfileRequest.url}}</a>
					</ul>
					<button class="btn btn-mini btn-inverse" style="margin-top:0px;" type="button" ng-click="logoutLinkedIn()">Logout</button>
				
		</div>

		<div class="row-fluid">
			<div class="container-fixed hero-unit" ng-show="!loggedUser">
				<p>Please sign in with your LinkedIn account.</p>
				<script type="IN/Login"></script>
			</div>
		</div>

		<hr>
		<footer>
			<p>LinkedIn functionalities inspired from the repository published by <a href="https://github.com/eucuepo/angular-linkedin">Eugenio Cuevas</a></p>
		</footer>
	</div>
</body>

