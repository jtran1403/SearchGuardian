<ng:include src="'views/header.html'"></ng:include>

<div class="userInformation well" ng-controller= "UserInfoCtrl">
  <h4> Enter the target's information:</h4>
  <form>
    <p> First Name:
      <input type="text" id ="firstName" ng-model="user.firstName" required/>
    </p>
    <p> Last Name: 
      <input type="text" id ="lastName" ng-model="user.lastName" required/>
    </p>
    <p> Date of birth:
      <select id="days" class="DoB" ng-model="dayBirth" required></select>
      <select id="months" class="DoB" ng-model="monthBirth" ng-change="resetDay()" required></select>
      <select id="years" class="DoB" ng-model="yearBirth" ng-change="resetDay()" required></select>
    </p>
    <p>
      <input type="button" value="Confirm" class="btns btn-primary" ng-click="setBirthDate()" onClick="showHidden();" />
      <input type="button" value="Reset" class="btns btn-primary" ng-click="resetForm()" />
    </p>

    <table id="userInformationConfirm" style ="display:none" class = "table table-striped table-bordered">
      <thead>
      <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Date of birth</th>
      </tr>
      </thead>
      <tbody>
      <tr>
          <td>{{user.firstName}}</td>
          <td>{{user.lastName}}</td>
          <td>{{user.dateOfBirth}}</td>
       </tr>
      </tbody>
    </table>  
  </form>

  <div id="searchTargets" style="display:none; margin-top:25px">
    <h4> Get results from:</h4>
    <label ng-repeat= "target in targets" style="display: block;">
      <p><input type="checkbox" name="target.name" value="target.id"  ng-click="updateSelection(target.id)" check-list="selection"> {{target.name}} </p>
    </label>

    <pre class="ng-binding"> {{selection|json}} </pre>

    <p><input type="button" value="Search" class="btns btn-primary" ng-click="facebook()" /></p>
  </div>

  <div id="userAuthentication" style="height: auto;" >
    <p><a class="btn btn-lg btn-success" href="#/targets/Facebook"> Facebook <span class="glyphicon glyphicon-ok"></span></a></p>
  </div>

</div>

<div class="footer">
  <p><span class="glyphicon glyphicon-heart"></span> Application based on the basic application from the Yeoman team</p>
</div>

<script>

  $(function() {
    for (i = new Date().getFullYear(); i > 1900; i--)
    {
        $('#years').append($('<option />').val(i).html(i));
    }
        
    for (i = 1; i <= 12; i++)
    {
        $('#months').append($('<option />').val(i).html(i));
    }
    
    updateDays(); 
        
    $('#years, #months').change(function(){
        updateDays(); 
    });

  });

  function updateDays(){
    $('#days').html('');
    month = $('#months').val();
    year = $('#years').val();
    days = updateMonth(month, year);

    for(i=1; i < days+1 ; i++)
    {
        $('#days').append($('<option />').val(i).html(i));
    }

  }

  function updateMonth(month, year) {
    return new Date(year, month, 0).getDate();
  }

  function showHidden(){
    document.getElementById('userInformationConfirm').style.display ='block';
    document.getElementById('searchTargets').style.display='block';
  }
</script>