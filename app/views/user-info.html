<ng:include src="'views/header.html'"></ng:include>

<div class="userInformation well" ng-controller= "MainCtrl">
  <h4> Enter the target's information:</h4>
  <form>
    <p> First Name:
      <input type="text" id ="firstName" ng-model="user.firstName" required/>
    </p>
    <p> Last Name: 
      <input type="text" id ="lastName" ng-model="user.lastName" required/>
    </p>
    <p> Date of birth:
      <select id="days" class="DoB" ng-model="dayBirth" required></select>
      <select id="months" class="DoB" ng-model="monthBirth" ng-change="resetDay()" required></select>
      <select id="years" class="DoB" ng-model="yearBirth" ng-change="resetDay()" required></select>
    </p>
    <p>
      <input type="button" value="Confirm" class="btns btn-primary" ng-click="setBirthDate()"/>
      <input type="button" value="Reset" class="btns btn-primary" ng-click="resetForm()" />
    </p>

    <table id="userInformationConfirm" ng-show="profileSet" class = "table table-striped table-bordered">
      <thead>
      <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Date of birth</th>
      </tr>
      </thead>
      <tbody>
      <tr>
          <td>{{user.firstName}}</td>
          <td>{{user.lastName}}</td>
          <td>{{user.dateOfBirth}}</td>
       </tr>
      </tbody>
    </table>  
  </form>

</div>

<div class="footer">
  <p><span class="glyphicon glyphicon-heart"></span> Application based on the basic application from the Yeoman team</p>
</div>

<script>

  $(function() {
    for (i = new Date().getFullYear(); i > 1900; i--)
    {
        $('#years').append($('<option />').val(i).html(i));
    }
        
    for (i = 1; i <= 12; i++)
    {
        $('#months').append($('<option />').val(i).html(i));
    }
    
    updateDays(); 
        
    $('#years, #months').change(function(){
        updateDays(); 
    });

  });

  function updateDays(){
    $('#days').html('');
    month = $('#months').val();
    year = $('#years').val();
    days = updateMonth(month, year);

    for(i=1; i < days+1 ; i++)
    {
        $('#days').append($('<option />').val(i).html(i));
    }

  }

  function updateMonth(month, year) {
    return new Date(year, month, 0).getDate();
  }

</script>